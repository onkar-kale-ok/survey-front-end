import{d as J,_ as U,r as R,a as K,c as z,o as Q,w as $,b as G,n as E,e as o,f as n,t as v,g as P,h as i,i as h,j as O,v as W,F as y,k as C,l as T,m as V,p as H,q as X,s as Y,u as Z,x as M,y as q,V as x,z as ee}from"./index.0ee80c0a.js";import{a as I}from"./index.becf6c0c.js";import{V as te}from"./VCardText.44edbe48.js";const ae=J({name:"my-table",emits:["return-checked-rows","do-search","is-finished","get-now-page","row-clicked"],props:{isLoading:{type:Boolean,require:!0},isReSearch:{type:Boolean,require:!0},hasCheckbox:{type:Boolean,default:!1},checkedReturnType:{type:String,default:"key"},title:{type:String,default:""},isFixedFirstColumn:{type:Boolean,default:!1},columns:{type:Array,default:()=>[]},rows:{type:Array,default:()=>[]},rowClasses:{type:[Array,Function],default:()=>[]},pageSize:{type:Number,default:10},total:{type:Number,default:100},page:{type:Number,default:1},sortable:{type:Object,default:()=>({order:"id",sort:"asc"})},messages:{type:Object,default:()=>({pagingInfo:"Showing {0}-{1} of {2}",pageSizeChangeLabel:"Row count:",gotoPageLabel:"Go to page:",noDataAvailable:"No data"})},isStaticMode:{type:Boolean,default:!1},isSlotMode:{type:Boolean,default:!1},isHidePaging:{type:Boolean,default:!1},pageOptions:{type:Array,default:()=>[{value:10,text:10},{value:25,text:25},{value:50,text:50}]}},setup(e,{emit:r,slots:k}){let m=R(null),_=e.pageOptions.length>0?R(e.pageOptions[0].value):R(e.pageSize);e.pageOptions.length>0&&e.pageOptions.forEach(s=>{Object.prototype.hasOwnProperty.call(s,"value")&&Object.prototype.hasOwnProperty.call(s,"text")&&e.pageSize==s.value&&(_.value=s.value)});const t=K({isSlotMode:e.isSlotMode,isCheckAll:!1,isHidePaging:e.isHidePaging,keyColumn:z(()=>{let s="";return Object.assign(e.columns).forEach(g=>{g.isKey&&(s=g.field)}),s}),page:e.page,pageSize:_.value,maxPage:z(()=>{if(e.total<=0)return 0;let s=Math.floor(e.total/t.pageSize);return e.total%t.pageSize>0&&s++,s}),offset:z(()=>(t.page-1)*t.pageSize+1),limit:z(()=>{let s=t.page*t.pageSize;return e.total>=s?s:e.total}),paging:z(()=>{let s=t.page-2<=0?1:t.page-2;t.maxPage-t.page<=2&&(s=t.maxPage-4),s=s<=0?1:s;let g=[];for(let c=s;c<=t.maxPage;c++)g.length<5&&g.push(c);return g}),order:e.sortable.order,sort:e.sortable.sort,pageOptions:e.pageOptions}),a=z(()=>{let s=e.rows;var g=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});let c=t.sort==="desc"?-1:1;s.sort(function(w,D){return g.compare(w[t.order],D[t.order])*c});let p=[];for(let w=t.offset-1;w<t.limit;w++)s[w]&&p.push(s[w]);return E(function(){A()}),p}),d=R([]);e.hasCheckbox&&(Q(()=>{d.value=[]}),$(()=>t.isCheckAll,s=>{let g=[];d.value.forEach((c,p)=>{c&&(c.checked=s,c.checked&&(e.checkedReturnType=="row"?g.push(a.value[p]):g.push(c.value)))}),r("return-checked-rows",g)}));const l=s=>{s.stopPropagation();let g=[];d.value.forEach((c,p)=>{c&&c.checked&&(e.checkedReturnType=="row"?g.push(a.value[p]):g.push(c.value))}),r("return-checked-rows",g)},u=()=>{d.value.forEach(s=>{s&&s.checked&&(s.checked=!1)}),r("return-checked-rows",[])},S=s=>{let g="asc";s==t.order&&t.sort=="asc"&&(g="desc");let c=(t.page-1)*t.pageSize,p=t.pageSize;t.order=s,t.sort=g,r("do-search",c,p,s,g),t.isCheckAll?t.isCheckAll=!1:e.hasCheckbox&&u()},L=(s,g)=>{t.isCheckAll=!1;let c=t.order,p=t.sort,w=(s-1)*t.pageSize,D=t.pageSize;(!e.isReSearch||s>1||s==g)&&r("do-search",w,D,c,p)};$(()=>t.page,L),$(()=>e.page,s=>{s<=1?(t.page=1,r("get-now-page",t.page)):s>=t.maxPage?(t.page=t.maxPage,r("get-now-page",t.page)):t.page=s}),$(()=>t.pageSize,()=>{t.page===1?L(t.page,t.page):(t.page=1,t.isCheckAll=!1)}),$(()=>e.pageSize,s=>{t.pageSize=s});const N=()=>{if(t.page==1)return!1;t.page--},F=s=>{t.page=s},B=()=>{if(t.page>=t.maxPage)return!1;t.page++};$(()=>e.rows,()=>{(e.isReSearch||e.isStaticMode)&&(t.page=1),E(function(){e.isStaticMode||A()})});const j=(s,...g)=>s.replace(/{(\d+)}/g,function(c,p){return typeof g[p]!="undefined"?g[p]:c}),A=()=>{if(m.value){let s=m.value.getElementsByClassName("is-rows-el");r("is-finished",s)}r("get-now-page",t.page)};return G(()=>{E(()=>{e.rows.length>0&&A()})}),e.hasCheckbox?{slots:k,localTable:m,localRows:a,setting:t,rowCheckbox:d,checked:l,doSort:S,prevPage:N,movePage:F,nextPage:B,stringFormat:j}:{slots:k,localTable:m,localRows:a,setting:t,doSort:S,prevPage:N,movePage:F,nextPage:B,stringFormat:j}}}),b=e=>(X("data-v-1183e378"),e=e(),Y(),e),se={class:"vtl vtl-card"},ie={key:0,class:"vtl-card-title"},le={class:"vtl-card-body"},oe={class:"vtl-row"},ne={key:0,class:"vtl-loading-mask"},de=b(()=>i("div",{class:"vtl-loading-content"},[i("span",{style:{color:"white"}},"Loading...")],-1)),re=[de],ge={class:"vtl-table vtl-table-hover vtl-table-bordered vtl-table-responsive vtl-table-responsive-sm",ref:"localTable"},ce={class:"vtl-thead"},ue={class:"vtl-thead-tr"},pe={key:0,class:"vtl-thead-th vtl-checkbox-th"},he=["onClick"],fe={key:0,class:"vtl-tbody"},ve=["onClick"],ye={key:0,class:"vtl-tbody-td"},ke=["value"],be=["innerHTML"],me={key:0},we={key:1},Ce=["onClick"],Se={key:0,class:"vtl-tbody-td"},Pe=["value"],_e=["innerHTML"],Le={key:1},ze={key:0},$e={key:1},Re={key:0,class:"vtl-paging vtl-row"},Ae={class:"vtl-paging-info col-sm-12 col-md-4"},De={role:"status","aria-live":"polite"},Ee={class:"vtl-paging-change-div col-sm-12 col-md-4"},Oe={class:"vtl-paging-count-label"},Te=["value"],Me={class:"vtl-paging-page-label"},Ie=["value"],Ne={class:"vtl-paging-pagination-div col-sm-12 col-md-4"},Fe={class:"dataTables_paginate"},Be={class:"vtl-paging-pagination-ul vtl-pagination"},je=b(()=>i("span",{"aria-hidden":"true"},"\xAB",-1)),Ve=b(()=>i("span",{class:"sr-only"},"First",-1)),He=[je,Ve],qe=b(()=>i("span",{"aria-hidden":"true"},"<",-1)),Je=b(()=>i("span",{class:"sr-only"},"Prev",-1)),Ue=[qe,Je],Ke=["onClick"],Qe=b(()=>i("span",{"aria-hidden":"true"},">",-1)),Ge=b(()=>i("span",{class:"sr-only"},"Next",-1)),We=[Qe,Ge],Xe=b(()=>i("span",{"aria-hidden":"true"},"\xBB",-1)),Ye=b(()=>i("span",{class:"sr-only"},"Last",-1)),Ze=[Xe,Ye],xe={key:1,class:"vtl-row"},et={class:"vtl-empty-msg col-sm-12 text-center"};function tt(e,r,k,m,_,t){return o(),n("div",se,[e.title?(o(),n("div",ie,v(e.title),1)):P("",!0),i("div",le,[i("div",oe,[i("div",{class:h(["col-sm-12",{"fixed-first-column":e.isFixedFirstColumn,"fixed-first-second-column":e.isFixedFirstColumn&&e.hasCheckbox}])},[e.isLoading?(o(),n("div",ne,re)):P("",!0),i("table",ge,[i("thead",ce,[i("tr",ue,[e.hasCheckbox?(o(),n("th",pe,[i("div",null,[O(i("input",{type:"checkbox",class:"vtl-thead-checkbox","onUpdate:modelValue":r[0]||(r[0]=a=>e.setting.isCheckAll=a)},null,512),[[W,e.setting.isCheckAll]])])])):P("",!0),(o(!0),n(y,null,C(e.columns,(a,d)=>(o(),n("th",{class:h(["vtl-thead-th",a.headerClasses]),key:d,style:T(Object.assign({width:a.width?a.width:"auto"},a.headerStyles))},[i("div",{class:h(["vtl-thead-column",{"vtl-sortable":a.sortable,"vtl-both":a.sortable,"vtl-asc":e.setting.order===a.field&&e.setting.sort==="asc","vtl-desc":e.setting.order===a.field&&e.setting.sort==="desc"}]),onClick:l=>a.sortable?e.doSort(a.field):!1},v(a.label),11,he)],6))),128))])]),e.rows.length>0?(o(),n("tbody",fe,[e.isStaticMode?(o(!0),n(y,{key:0},C(e.localRows,(a,d)=>(o(),n("tr",{key:d,class:h(["vtl-tbody-tr",typeof e.rowClasses=="function"?e.rowClasses(a):e.rowClasses]),onClick:l=>e.$emit("row-clicked",a)},[e.hasCheckbox?(o(),n("td",ye,[i("div",null,[i("input",{type:"checkbox",class:"vtl-tbody-checkbox",ref_for:!0,ref:l=>{e.rowCheckbox[d]=l},value:a[e.setting.keyColumn],onClick:r[1]||(r[1]=(...l)=>e.checked&&e.checked(...l))},null,8,ke)])])):P("",!0),(o(!0),n(y,null,C(e.columns,(l,u)=>(o(),n("td",{key:u,class:h(["vtl-tbody-td",l.columnClasses]),style:T(l.columnStyles)},[l.display?(o(),n("div",{key:0,innerHTML:l.display(a)},null,8,be)):(o(),n(y,{key:1},[e.setting.isSlotMode&&e.slots[l.field]?(o(),n("div",me,[V(e.$slots,l.field,{value:a},void 0,!0)])):(o(),n("span",we,v(a[l.field]),1))],64))],6))),128))],10,ve))),128)):(o(!0),n(y,{key:1},C(e.rows,(a,d)=>(o(),n("tr",{key:d,class:h(["vtl-tbody-tr",typeof e.rowClasses=="function"?e.rowClasses(a):e.rowClasses]),onClick:l=>e.$emit("row-clicked",a)},[e.hasCheckbox?(o(),n("td",Se,[i("div",null,[i("input",{type:"checkbox",class:"vtl-tbody-checkbox",ref_for:!0,ref:l=>{e.rowCheckbox[d]=l},value:a[e.setting.keyColumn],onClick:r[2]||(r[2]=(...l)=>e.checked&&e.checked(...l))},null,8,Pe)])])):P("",!0),(o(!0),n(y,null,C(e.columns,(l,u)=>(o(),n("td",{key:u,class:h(["vtl-tbody-td",l.columnClasses]),style:T(l.columnStyles)},[l.display?(o(),n("div",{key:0,innerHTML:l.display(a)},null,8,_e)):(o(),n("div",Le,[e.setting.isSlotMode&&e.slots[l.field]?(o(),n("div",ze,[V(e.$slots,l.field,{value:a},void 0,!0)])):(o(),n("span",$e,v(a[l.field]),1))]))],6))),128))],10,Ce))),128))])):P("",!0)],512)],2)]),e.rows.length>0?(o(),n("div",Re,[e.setting.isHidePaging?P("",!0):(o(),n(y,{key:0},[i("div",Ae,[i("div",De,v(e.stringFormat(e.messages.pagingInfo,e.setting.offset,e.setting.limit,e.total)),1)]),i("div",Ee,[i("span",Oe,v(e.messages.pageSizeChangeLabel),1),O(i("select",{class:"vtl-paging-count-dropdown","onUpdate:modelValue":r[3]||(r[3]=a=>e.setting.pageSize=a)},[(o(!0),n(y,null,C(e.pageOptions,a=>(o(),n("option",{value:a.value,key:a.value},v(a.text),9,Te))),128))],512),[[H,e.setting.pageSize]]),i("span",Me,v(e.messages.gotoPageLabel),1),O(i("select",{class:"vtl-paging-page-dropdown","onUpdate:modelValue":r[4]||(r[4]=a=>e.setting.page=a)},[(o(!0),n(y,null,C(e.setting.maxPage,a=>(o(),n("option",{key:a,value:parseInt(a)},v(a),9,Ie))),128))],512),[[H,e.setting.page]])]),i("div",Ne,[i("div",Fe,[i("ul",Be,[i("li",{class:h(["vtl-paging-pagination-page-li vtl-paging-pagination-page-li-first page-item",{disabled:e.setting.page<=1}])},[i("a",{class:"vtl-paging-pagination-page-link vtl-paging-pagination-page-link-first page-link",href:"javascript:void(0)","aria-label":"Previous",onClick:r[5]||(r[5]=a=>e.setting.page=1)},He)],2),i("li",{class:h(["vtl-paging-pagination-page-li vtl-paging-pagination-page-li-prev page-item",{disabled:e.setting.page<=1}])},[i("a",{class:"vtl-paging-pagination-page-link vtl-paging-pagination-page-link-prev page-link",href:"javascript:void(0)","aria-label":"Previous",onClick:r[6]||(r[6]=(...a)=>e.prevPage&&e.prevPage(...a))},Ue)],2),(o(!0),n(y,null,C(e.setting.paging,a=>(o(),n("li",{class:h(["vtl-paging-pagination-page-li vtl-paging-pagination-page-li-number page-item",{disabled:e.setting.page===a}]),key:a},[i("a",{class:"vtl-paging-pagination-page-link vtl-paging-pagination-page-link-number page-link",href:"javascript:void(0)",onClick:d=>e.movePage(a)},v(a),9,Ke)],2))),128)),i("li",{class:h(["vtl-paging-pagination-page-li vtl-paging-pagination-page-li-next page-item",{disabled:e.setting.page>=e.setting.maxPage}])},[i("a",{class:"vtl-paging-pagination-page-link vtl-paging-pagination-page-link-next page-link",href:"javascript:void(0)","aria-label":"Next",onClick:r[7]||(r[7]=(...a)=>e.nextPage&&e.nextPage(...a))},We)],2),i("li",{class:h(["vtl-paging-pagination-page-li vtl-paging-pagination-page-li-last page-item",{disabled:e.setting.page>=e.setting.maxPage}])},[i("a",{class:"vtl-paging-pagination-page-link vtl-paging-pagination-page-link-last page-link",href:"javascript:void(0)","aria-label":"Next",onClick:r[8]||(r[8]=a=>e.setting.page=e.setting.maxPage)},Ze)],2)])])])],64))])):(o(),n("div",xe,[i("div",et,v(e.messages.noDataAvailable),1)]))])])}var at=U(ae,[["render",tt],["__scopeId","data-v-1183e378"]]);const st=J({name:"App",components:{TableLite:at},setup(){const e=K({isLoading:!1,isReSearch:!1,rowClasses:d=>d.id==1?["aaa","is-id-one"]:["bbb","other"],columns:[{label:"ID",field:"id",width:"3%",sortable:!0,isKey:!0},{label:"Survey Title",field:"survey_name",width:"10%",sortable:!0},{label:"Survey Description",field:"survey_description",width:"15%",sortable:!0},{label:"View",field:"view",width:"10%",display:function(d){return'<button type="button" style="background: yellow; width:100%;" data-id="'+d.id+'" class="is-rows-el view-btn">View</button>'}},{label:"Edit",field:"edit",width:"10%",display:function(d){return'<button type="button" style="background: #6495ED; width:100%;" data-id="'+d.id+'" class="is-rows-el edit-btn">Edit</button>'}},{label:"Delete",field:"delete",width:"10%",display:function(d){return'<button type="button" style="background: #E95462; width:100%;" data-id="'+d.id+'" class="is-rows-el delete-btn">Delete</button>'}}],rows:[],totalRecordCount:0,sortable:{order:"id",sort:"asc"},messages:{pagingInfo:"Showing {0}-{1} of {2}",pageSizeChangeLabel:"Row count:",gotoPageLabel:"Go to page:",noDataAvailable:"No data"}});let r=[];const k=async(d,l,u,S)=>{if(e.isLoading=!0,e.isReSearch=d==null,S=="asc"){var L={method:"get",url:"http://localhost:9005/api/surveydetails/surveyList",headers:{"x-developer-token":"c256f988-459a-43ca-8fef-9c14f7134900","x-api-key":"qwrtrthedwd2124@#$%2sSQw2"}};I(L).then(function(f){console.log(JSON.stringify(f.data.responseData)),e.rows=f.data.responseData,e.totalRecordCount=f.data.responseData.length,e.sortable.order=u,e.sortable.sort=S}).catch(function(f){console.log(f)})}},m=d=>{console.log(Array.prototype,"Array.prototypeArray.prototypeArray.prototypeArray.prototype",d),e.isLoading=!1,Array.prototype.forEach.call(d,function(l){console.log(l.classList,"element.classListelement.classListelement.classListelement.classList"),l.classList.contains("view-btn")&&l.addEventListener("click",function(u){u.stopPropagation(),console.log(this.dataset.id+" view-btn click!!")}),l.classList.contains("edit-btn")&&l.addEventListener("click",function(u){u.stopPropagation(),console.log(this.dataset.id+" edit-btn click!!")}),l.classList.contains("delete-btn")&&l.addEventListener("click",function(u){u.stopPropagation(),console.log(this.dataset.id+" delete-btn click!!");var S=JSON.stringify({surveyId:[this.dataset.id]}),L={method:"delete",url:"http://localhost:9005/api/surveydetails/deleteSurveyById",headers:{"x-developer-token":"c256f988-459a-43ca-8fef-9c14f7134900","x-api-key":"qwrtrthedwd2124@#$%2sSQw2","Content-Type":"application/json"},data:S};I(L).then(function(f){console.log(JSON.stringify(f.data)),alert(f.data.resultMessage),k(0,10,"id","asc")}).catch(function(f){console.log(f)})})})},_=d=>{r=d,console.log(d,"rowsKeyrowsKey")};return k(0,10,"id","asc"),{table:e,doSearch:k,tableLoadingFinish:m,updateCheckedRows:_,rowClicked:d=>{console.log("Row clicked!",d)},deleteData:()=>{var d=JSON.stringify({surveyId:r}),l={method:"delete",url:"http://localhost:9005/api/surveydetails/deleteSurveyById",headers:{"x-developer-token":"c256f988-459a-43ca-8fef-9c14f7134900","x-api-key":"qwrtrthedwd2124@#$%2sSQw2","Content-Type":"application/json"},data:d};I(l).then(function(u){console.log(JSON.stringify(u.data)),alert(u.data.resultMessage),k(0,10,"id","asc")}).catch(function(u){console.log(u)})}}}}),it=i("h1",null,"Surveys List",-1),lt=i("h4",null,"Search, Edit or Delete Surveys",-1),ot=ee("DELETE");function nt(e,r,k,m,_,t){const a=Z("table-lite");return o(),n(y,null,[M(te,null,{default:q(()=>[it,lt,M(x,{onClick:e.deleteData},{default:q(()=>[ot]),_:1},8,["onClick"])]),_:1}),M(a,{"has-checkbox":!0,"is-loading":e.table.isLoading,"is-re-search":e.table.isReSearch,columns:e.table.columns,rows:e.table.rows,rowClasses:e.table.rowClasses,total:e.table.totalRecordCount,sortable:e.table.sortable,onDoSearch:e.doSearch,onIsFinished:e.tableLoadingFinish,onReturnCheckedRows:e.updateCheckedRows,onRowClicked:e.rowClicked},null,8,["is-loading","is-re-search","columns","rows","rowClasses","total","sortable","onDoSearch","onIsFinished","onReturnCheckedRows","onRowClicked"])],64)}var ct=U(st,[["render",nt]]);export{ct as default};
